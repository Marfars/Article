# 自定义布局之尺寸的自定义

## 重写已有View的onMeasure（继承）

> 这种是比较简单的，只要继承已有的view，简单改写他们的尺寸

### 步骤

- 重写onMeasure

- 用getMeasuredWidth和getMeasuredHeight获取到测量出的尺寸

- 计算出最终要的尺寸

- 用setMeasuredDimension(width, height)把结果保存

### 为什么在onMeasure做不在layout做？

因为在layout里做处理并不会让父布局知道我们的宽高变化，只有onMeasure才会通知父布局。layout的修改比较靠后了，父布局已经来不及修改；但是onMeasure比较靠前，父布局可以干预

### getWidth和getMeasuredWidth区别

- getWidth是存储的位置和尺寸，就是父view告诉的尺寸，已成定局

- getMeasuredWidth是指我们期望的尺寸，父view可能修改掉

- 测量过程中是拿不到准确getWidth的，因为测量没有完成，当前的值是不准的

## 重写已有View的onMeasure（完全重写）

> 这种比较麻烦，需要对自定义View完全进行自定义尺寸测量

### 详细步骤

- 重写onMeasure

- 计算出自己的尺寸

- 用resolveSize或者resolveSizeAndState修正结果

- 使用setMeasuredDimension(width, height)保存结果

## 重写onMeasure和onLayout

> 自定义Layout

### TagLayout